<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI SDR Assistant</title>
    <link rel="icon" type="image/png" href="logo-light.png" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap"
    />
    <link rel="stylesheet" href="app.css" />
  </head>
  <body>
    <div id="appShell">
      <aside id="navRail" class="collapsed">
        <div class="rail-compact">
          <button id="railLogo" class="rail-btn rail-logo" aria-label="AI SDR Assistant">
            <img src="logo-light.png" data-theme-logo data-logo-light="logo-light.png" data-logo-dark="logo-dark.png" alt="" />
            <span class="rail-logo-hover-icon" aria-hidden="true">
              <span class="sidebar-icon" aria-hidden="true"></span>
            </span>
          </button>
          <div class="rail-separator"></div>
          <button id="railNewResearch" class="rail-btn" aria-label="Start new research">
            <span class="rail-icon" aria-hidden="true" data-feather="edit-3"></span>
          </button>
          <button id="railHistory" class="rail-btn" aria-label="Open search history">
            <span class="rail-icon" aria-hidden="true" data-feather="search"></span>
          </button>
          <button
            id="settingsTrigger"
            class="rail-btn rail-settings"
            type="button"
            aria-label="Open settings"
            data-settings-trigger
          >
            <span class="rail-icon" aria-hidden="true" data-feather="settings"></span>
          </button>
        </div>
        <div class="history-expanded">
          <div class="history-sidebar-header">
            <div class="history-sidebar-logo">
              <img src="logo-light.png" data-theme-logo data-logo-light="logo-light.png" data-logo-dark="logo-dark.png" alt="AI SDR Assistant" />
            </div>
            <h2 class="history-sidebar-title">AI SDR Assistant</h2>
            <button
              id="historyCollapse"
              type="button"
              aria-label="Close history sidebar"
              aria-expanded="false"
              aria-controls="historySidebarContent"
            >
              <span class="sidebar-icon" aria-hidden="true"></span>
            </button>
          </div>
          <div class="history-sidebar-actions">
            <button id="newResearch" type="button" class="history-action primary"><span class="history-action-icon" aria-hidden="true" data-feather="edit-3"></span><span class="history-action-label">New Research</span></button>
            <button id="historySearch" type="button" class="history-action" aria-label="Search Briefs"><span class="history-action-icon" aria-hidden="true" data-feather="search"></span><span class="history-action-label">Search Briefs</span></button>
          </div>
          <div class="history-scroll">
            <div class="history-scroll-header">Briefs</div>
            <div id="historySidebarContent">
              <div class="history-section" data-history-section="targetedBrief">
                <div id="historyEmpty">No history yet. Run a brief to see it here.</div>
                <div id="historyList" role="list"></div>
              </div>
              <div class="history-section" data-history-section="targetGeneration" hidden>
                <div id="targetHistoryEmpty" class="history-empty-placeholder">No targets yet. Generate one to see it here.</div>
                <div id="targetHistoryList" role="list"></div>
              </div>
            </div>
          </div>
          <button type="button" class="history-action history-settings" data-settings-trigger aria-label="Open settings">
            <span class="history-action-icon" aria-hidden="true" data-feather="settings"></span>
            <span class="history-action-label">Settings</span>
          </button>
        </div>
      </aside>
      <div id="app">
        <div id="navRow">
          <div id="modeSwitcher" role="tablist" aria-label="Generation mode">
            <button type="button" class="mode-tab active" role="tab" aria-selected="true" data-mode-tab="targetedBrief">
              Targeted Brief Generation
            </button>
            <button type="button" class="mode-tab" role="tab" aria-selected="false" data-mode-tab="targetGeneration">
              Target Generation
            </button>
          </div>
          <button id="exportTrigger" type="button" class="primary ghosted">Export</button>
        </div>
        <div id="mainPane">
          <div class="mode-view" data-mode-view="targetedBrief">
            <div class="brief-section-header">
              <p class="section-desc">Generate company briefs with personas and outreach tailored to your product context.</p>
            </div>
            <div id="briefCommandBar" class="brief-command-bar" hidden aria-label="Brief command bar">
              <div class="brief-command-header">
                <div class="brief-command-label">Inputs</div>
                <button
                  id="briefBarToggle"
                  class="brief-command-toggle"
                  type="button"
                  aria-label="Collapse input bar"
                  aria-expanded="true"
                  aria-controls="briefCommandBody"
                  title="Collapse input bar"
                >
                  <span class="sr-only">Toggle input bar</span>
                  <span class="bar-icon" aria-hidden="true" data-feather="chevron-up"></span>
                </button>
              </div>
              <div id="briefCommandBody" class="brief-command-body">
                <div class="brief-command-row brief-command-inline">
                  <button id="briefRegenerate" type="button" class="bar-icon-btn brief-bar-regenerate">
                    <span class="bar-icon" aria-hidden="true" data-feather="rotate-cw"></span>
                    <span class="bar-icon-label">Regenerate</span>
                  </button>
                  <div class="brief-chip-row brief-chip-row-inline" role="list">
                    <button id="briefChipCompany" class="brief-chip brief-chip-editable" type="button" role="listitem">
                      <span class="chip-label">Company</span>
                      <span class="chip-value" data-brief-chip-company>Not set</span>
                      <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                      <span class="sr-only">Edit company</span>
                    </button>
                    <button id="briefChipLocation" class="brief-chip brief-chip-editable" type="button" role="listitem">
                      <span class="chip-label">Location</span>
                      <span class="chip-value" data-brief-chip-location>Not set</span>
                      <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                      <span class="sr-only">Edit location</span>
                    </button>
                    <button id="briefChipProduct" class="brief-chip brief-chip-editable" type="button" role="listitem">
                      <span class="chip-label">Product</span>
                      <span class="chip-value" data-brief-chip-product>Not set</span>
                      <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                      <span class="sr-only">Edit product</span>
                    </button>
                    <button id="briefChipDocs" class="brief-chip brief-chip-compact brief-chip-editable" type="button" role="listitem">
                      <span class="chip-label">Docs</span>
                      <span class="chip-value" data-brief-chip-docs>0</span>
                      <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                      <span class="sr-only">Edit docs</span>
                    </button>
                    <button id="briefChipSections" class="brief-chip brief-chip-compact brief-chip-editable" type="button" role="listitem">
                      <span class="chip-label">Sections</span>
                      <span class="chip-value" data-brief-chip-sections>Default</span>
                      <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                      <span class="sr-only">Edit sections</span>
                    </button>
                  </div>
                  <div class="brief-command-spacer" aria-hidden="true"></div>
                  <div id="briefBarStatus" class="brief-bar-status" role="status" aria-live="polite"></div>
                </div>
              </div>
            </div>
            <div id="briefEditDrawer" class="brief-edit-drawer">
            <div id="formPane">
              <div class="form-input-grid">
                <div class="input-card">
                  <label for="company">Company</label>
                  <p class="input-desc">Who are we researching? Add the exact company name for sharper context.</p>
                  <input id="company" placeholder="e.g., Infosys" />
                </div>
                <div class="input-card">
                  <label for="location">Location</label>
                  <p class="input-desc">City, region, or country you want the brief to focus on.</p>
                  <input id="location" placeholder="e.g., India" />
                </div>
                <div class="input-card">
                  <label for="product">Product</label>
                  <p class="input-desc">The solution or offering you want woven into the outreach.</p>
                  <input id="product" placeholder="e.g., Cloud Security" />
                </div>
                <div class="input-card">
                  <label>Upload Docs (PDF/TXT)</label>
                  <p class="input-desc">Optional collateral to ground the research â€” battlecards, one-pagers, notes.</p>
                  <div class="doc-selector">
                    <button id="briefDocPicker" type="button" class="ghost">Add documents</button>
                    <div id="briefDocChips" class="doc-chip-list" aria-live="polite" aria-label="Selected documents for brief"></div>
                  </div>
                </div>
              </div>

              <div class="actions">
                <button id="generate">Generate Brief</button>
                <button id="briefSectionsButton" type="button" class="ghost">Sections</button>
                <button id="viewDocs">View Docs</button>
              </div>
              <div id="status"></div>
            </div>
            </div>
            <div id="resultWrapper">
              <div id="result" style="display:none">
                <div class="results-header">
                  <h3>Results</h3>
                  <div class="results-actions">
                    <button id="briefSectionsToggle" type="button" class="ghost results-toggle" aria-haspopup="dialog">
                      Sections
                    </button>
                  </div>
                </div>
                <div id="brief" class="result-section">
                  <div class="brief-module" data-brief-module="overview">
                    <div id="briefSummarySection" class="brief-summary">
                      <div class="summary-grid">
                        <div class="summary-item">
                          <div class="summary-label">Headquarters</div>
                          <div class="summary-value-row editable-section">
                            <div id="briefHqValue" class="summary-value">Headquarters not generated yet.</div>
                            <button id="briefHqEdit" type="button" class="inline-edit-btn" aria-label="Edit headquarters">
                              <span class="inline-edit-icon" data-feather="edit-3" aria-hidden="true"></span>
                              <span class="sr-only">Edit headquarters</span>
                            </button>
                          </div>
                        </div>
                        <div class="summary-item">
                          <div class="summary-label summary-label-locked">Revenue</div>
                          <div class="summary-value summary-value-locked" aria-label="Revenue is read only" title="Locked (read-only)">
                            <span id="briefRevenueValue">Revenue not generated yet.</span>
                          </div>
                        </div>
                        <div class="summary-item">
                          <div class="summary-label summary-label-locked">Industry Sector</div>
                          <div class="summary-value summary-value-locked" aria-label="Industry sector is read only" title="Locked (read-only)">
                            <span id="briefIndustryValue">Industry sector not generated yet.</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div id="legacyBriefContainer" class="legacy-brief" hidden></div>
                  </div>
                  <div class="brief-module" data-brief-module="topNews">
                    <div id="topNewsSection" class="top-news-section">
                      <div class="top-news-header">
                        <h4>Top News</h4>
                        <span id="topNewsHint" class="section-hint"></span>
                      </div>
                      <ul id="topNewsList" class="top-news-list">
                        <li>Top news not generated yet.</li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="result-section" data-brief-module="personas">
                  <div class="section-header-row">
                    <h4>Personas</h4>
                    <span class="section-hint">Editable. Top news, revenue, sector stay locked.</span>
                  </div>
                  <div id="personas"></div>
                </div>
                <div id="emailSection" class="result-section" data-brief-module="emails">
                  <div class="emailHeader">
                    <div class="emailHeaderLeft">
                      <h4>Generated Emails</h4>
                    </div>
                  </div>
                  <div id="personaTabs" role="tablist" aria-label="Persona email drafts"></div>
                  <div class="email-draft-card">
                    <div class="email-draft-controls">
                      <button id="editEmailDraft" type="button" class="draft-icon-btn" aria-label="Edit email">
                        <span class="inline-edit-icon" data-feather="edit-3" aria-hidden="true"></span>
                        <span class="sr-only">Edit email</span>
                      </button>
                      <button id="copyEmail" type="button" class="draft-icon-btn" aria-label="Copy email">
                        <span class="inline-edit-icon" data-feather="copy" aria-hidden="true"></span>
                        <span class="sr-only">Copy email</span>
                      </button>
                    </div>
                    <div id="emailOut" class="outputBox richText" aria-live="polite"></div>
                  </div>
                  <div id="emailVersionControls" class="versionControls versionControls-inline" aria-live="polite"></div>
                  <div class="revisionActionRow">
                    <button id="reviseEmailPersona" type="button" class="ghost">Rewrite this email</button>
                    <button id="reviseEmailAll" type="button" class="ghost">Rewrite all emails</button>
                  </div>
                </div>
                <div id="telePitchSection" class="result-section" data-brief-module="telePitch">
                  <div class="telePitchHeader">
                    <div class="telePitchHeaderLeft editable-section">
                      <h4>Telephonic Pitch</h4>
                      <button id="editTelePitch" type="button" class="inline-edit-btn" aria-label="Edit telephonic pitch">
                        <span class="inline-edit-icon" data-feather="edit-3" aria-hidden="true"></span>
                        <span class="sr-only">Edit telephonic pitch</span>
                      </button>
                    </div>
                    <div class="telePitchActions">
                      <span class="telePitchHint">Updates with persona selection.</span>
                    </div>
                  </div>
                  <div id="telePersonaTabs" role="tablist" aria-label="Persona telephonic pitch drafts"></div>
                  <pre id="telePitchOut" class="outputBox">No telephonic pitch generated yet.</pre>
                  <div id="pitchVersionControls" class="versionControls versionControls-inline" aria-live="polite"></div>
                  <div class="revisionActionRow">
                    <button id="revisePitchPersona" type="button" class="ghost">Rewrite this pitch</button>
                    <button id="revisePitchAll" type="button" class="ghost">Rewrite all pitches</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mode-view" data-mode-view="targetGeneration" hidden>
            <div class="target-section">
              <p class="section-desc">Provide product context to research target companies in a specific location.</p>
              <div id="targetCommandBar" class="brief-command-bar" hidden aria-label="Target input bar">
                <div class="brief-command-header">
                  <div class="brief-command-label">Inputs</div>
                  <button
                    id="targetBarToggle"
                    class="brief-command-toggle"
                    type="button"
                    aria-label="Collapse input bar"
                    aria-expanded="true"
                    aria-controls="targetCommandBody"
                    title="Collapse input bar"
                  >
                    <span class="sr-only">Toggle input bar</span>
                    <span class="bar-icon" aria-hidden="true" data-feather="chevron-up"></span>
                  </button>
                </div>
                <div id="targetCommandBody" class="brief-command-body">
                  <div class="brief-command-row brief-command-inline">
                    <button id="targetRegenerate" type="button" class="bar-icon-btn brief-bar-regenerate">
                      <span class="bar-icon" aria-hidden="true" data-feather="rotate-cw"></span>
                      <span class="bar-icon-label">Regenerate</span>
                    </button>
                    <div class="brief-chip-row brief-chip-row-inline" role="list">
                      <button id="targetChipProduct" class="brief-chip brief-chip-editable brief-chip-fixed" type="button" role="listitem">
                        <span class="chip-label">Product</span>
                        <span class="chip-value" data-target-chip-product>Not set</span>
                        <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                        <span class="sr-only">Edit product</span>
                      </button>
                      <button id="targetChipLocation" class="brief-chip brief-chip-editable brief-chip-fixed" type="button" role="listitem">
                        <span class="chip-label">Location</span>
                        <span class="chip-value" data-target-chip-location>Not set</span>
                        <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                        <span class="sr-only">Edit location</span>
                      </button>
                      <button id="targetChipSectors" class="brief-chip brief-chip-compact brief-chip-editable brief-chip-fixed" type="button" role="listitem">
                        <span class="chip-label">Sectors</span>
                        <span class="chip-value" data-target-chip-sectors>Not set</span>
                        <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                        <span class="sr-only">Edit sectors</span>
                      </button>
                      <button id="targetChipDocs" class="brief-chip brief-chip-compact brief-chip-editable brief-chip-fixed" type="button" role="listitem">
                        <span class="chip-label">Docs</span>
                        <span class="chip-value" data-target-chip-docs>0</span>
                        <span class="chip-edit" aria-hidden="true" data-feather="edit-3"></span>
                        <span class="sr-only">Edit docs</span>
                      </button>
                    </div>
                    <div class="brief-command-spacer" aria-hidden="true"></div>
                    <div id="targetBarStatus" class="brief-bar-status" role="status" aria-live="polite"></div>
                  </div>
                </div>
              </div>
              <div id="targetEditDrawer" class="brief-edit-drawer">
                <form id="targetForm" class="target-form">
                  <div class="input-card">
                    <label for="targetProduct">Product Name</label>
                    <p class="input-desc">What are you taking to market? Name the product so targeting stays on-message.</p>
                    <input id="targetProduct" name="targetProduct" type="text" placeholder="e.g., Cloud Security Platform" autocomplete="off" />
                  </div>
                  <div class="input-card">
                    <label>Product Document Upload</label>
                    <p class="input-desc">Attach collateral to help the assistant pick the right companies.</p>
                    <div class="doc-selector">
                      <button id="targetDocPicker" type="button" class="ghost">Add documents</button>
                      <div id="targetDocChips" class="doc-chip-list" aria-live="polite" aria-label="Selected documents for targets"></div>
                    </div>
                  </div>
                  <div class="input-card">
                    <label for="targetSectorsInput">Target Sectors of the Product</label>
                    <p class="input-desc">Industries or verticals you want to prioritize.</p>
                    <div class="target-sectors-field">
                      <div id="targetSectorsChips" class="target-sectors-chips" aria-live="polite" aria-label="Selected target sectors"></div>
                      <input id="targetSectorsInput" name="targetSectorsInput" type="text" placeholder="e.g., FinTech, Healthcare" autocomplete="off" />
                      <p class="target-sectors-hint">Type a sector and press comma to add it. Remove a sector with -.</p>
                    </div>
                  </div>
                  <div class="input-card">
                  <label for="targetLocation">Locations</label>
                  <p class="input-desc">Where should we hunt for new logos? Add cities or regions.</p>
                  <div class="target-sectors-field">
                    <div id="targetLocationsChips" class="target-locations-chips" aria-live="polite" aria-label="Selected target locations"></div>
                    <input id="targetLocation" name="targetLocation" type="text" placeholder="e.g., Singapore, Dubai" autocomplete="off" />
                    <p class="target-sectors-hint">Type a location and press comma to add it. Remove a location with -.</p>
                  </div>
                </div>
                <button id="generateTargets" type="submit" class="primary">Generate Targets</button>
              </form>
            </div>
              <div id="targetStatus" class="target-status" role="status" aria-live="polite"></div>
              <div id="targetResults" class="target-results" hidden>
                <div class="target-results-header">
                  <h4>Suggested Companies</h4>
                  <button id="copyTargets" type="button" class="ghost">Copy Results</button>
                </div>
                <div class="target-results-scroll">
                  <ul id="targetResultsList" class="target-results-list"></ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="modalRoot" class="hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-container" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
          <h3 id="modalTitle"></h3>
          <button id="modalClose" type="button" aria-label="Close modal">
            <span class="modal-close-icon" aria-hidden="true" data-feather="x"></span>
          </button>
        </div>
        <div id="modalBody" class="modal-body"></div>
        <div id="modalFooter" class="modal-footer"></div>
      </div>
    </div>
    <script src="chrome-shim.js"></script>
    <script src="prompts.js"></script>
    <script src="background-web.js"></script>
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script src="https://unpkg.com/feather-icons@4.29.2/dist/feather.min.js"></script>
    <script src="popup-web.js"></script>
    <div id="toastRoot" class="toast-root" aria-live="polite" aria-atomic="true"></div>
    <script>
      if (window.feather && typeof window.feather.replace === 'function') {
        window.feather.replace({ 'stroke-width': 1.9 });
      }
    </script>
  </body>
</html>
